setwd("C:/Users/L.GonzalezMorales/Documents/GitHub/PCBS/SDG-Matrix")
library(data.table)
setwd("C:/Users/L.GonzalezMorales/Documents/GitHub/PCBS/SDG-Matrix")
sdgMatrix08 <- as.data.table(read.table("Input/Goal 8 - Matrix.txt",
header = TRUE,
sep = "\t",
quote = "\"" ,
na.strings = "",
stringsAsFactors = FALSE,
encoding = "UTF-8"))
View(sdgMatrix08)
library(data.table)
setwd("C:/Users/L.GonzalezMorales/Documents/GitHub/PCBS/SDG-Matrix")
#===================================================================
# Read raw matrix by goal
#===================================================================
sdgMatrix08 <- as.data.table(read.table("Input/Goal 8 - Matrix.txt",
header = TRUE,
sep = "\t",
quote = "\"" ,
na.strings = "",
stringsAsFactors = FALSE,
encoding = "UTF-8"))
#===================================================================
# Pivot matrix
#===================================================================
install.packages("tidyr")
TEST <- sdgMatrix08 %>%
gather(key, value, c(Value,  IndicatorID))
library(magrittr)
TEST <- sdgMatrix08 %>%
gather(key, value, c(Value,  IndicatorID))
library(tidyr)
TEST <- sdgMatrix08 %>%
gather(key, value, c(Value,  IndicatorID))
View(TEST)
TEST2 <- TEST %>%
unite(temp1, Period, key, sep = ".")
View(TEST2)
TEST <- sdgMatrix08 %>%
gather(key, value, c(Value,  Source, FN))
TEST2 <- TEST %>%
unite(temp1, Period, key, sep = ".")
View(TEST2)
TEST3 <- TEST2[,! names(TEST2) %in% c( "Period")] %>%
spread(temp1, value)
View(TEST3)
write.table(TEST3,
file = "Output/Goal 8 - Matrix - pivot.txt",
append = FALSE,
quote = FALSE,
sep = "\t",
eol = "\n",
na = "",
dec = ".",
row.names = FALSE,
col.names = TRUE,
fileEncoding = "UTF-8")
